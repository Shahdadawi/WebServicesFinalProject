<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Victims & Witnesses Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>

<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg sticky-top navbar-dark bg-dark">
    <div class="container">
      <a class="navbar-brand fw-bold mx-auto d-lg-none" href="#" style="font-size: 26px;">Human Rights Monitor</a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse justify-content-between" id="navbarSupportedContent">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="index.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="report.html">Report</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">About</a>
          </li>
          <li class="nav-item d-none" id="dashboard-link">
            <a class="nav-link" href="dashboard.html">Dashboard</a>
          </li>

        </ul>

        <a class="navbar-brand fw-bold mx-auto d-none d-lg-block" href="#" style="font-size: 26px;">Human Rights
          Monitor</a>


      </div>
    </div>
  </nav>


  <header class="d-flex justify-content-center align-items-center text-black"
    style="background: url('assets/img/slider/slide3.jpg') no-repeat; background-position: 20% center; background-size: cover; min-height: 300px;">
    <h1 class="mb-4">Victims & Witnesses Management</h1>
  </header>
  <div class="container my-5">


    <h2>Add victim/witness</h2>
    <!-- Add / Edit Form -->
    <form id="victimForm" class="card p-4 mb-4">
      <input type="hidden" id="victimId">
      <div class="row">
        <div class="col-md-3">
          <label>Type</label>
          <select class="form-select" id="type" required>
            <option value="victim">Victim</option>
            <option value="witness">Witness</option>
          </select>
        </div>
        <div class="col-md-3">
          <label>Anonymous</label>
          <select class="form-select" id="anonymous" required>
            <option value="false">No</option>
            <option value="true">Yes</option>
          </select>
        </div>
        <div class="col-md-3">
          <label>Full Name</label>
          <input type="text" class="form-control" id="full_name" />
        </div>
        <div class="col-md-3">
          <label>Pseudonym</label>
          <input type="text" class="form-control" id="pseudonym_name" />
        </div>
      </div>

      <div class="row mt-3">
        <div class="col-md-2"><label>Age</label><input type="number" class="form-control" id="age" /></div>
        <div class="col-md-3">
          <label>Gender</label>
          <select class="form-select" id="gender">
            <option value="female">Female</option>
            <option value="male">Male</option>
            <option value="other">Other</option>
          </select>
        </div>
        <div class="col-md-3"><label>Email</label><input type="email" class="form-control" id="email" /></div>
        <div class="col-md-3"><label>Phone</label><input type="text" class="form-control" id="phone" /></div>
       

        <div class="col-md-1 d-flex align-items-end">
          <button class="btn btn-primary w-100" type="submit">Save</button>
        </div>
      </div>
    </form>

    <!-- Display All -->
    
    <div id="victimList" class="row"></div>

    <!-- Dropdown for details -->
    <div class="card p-4 my-4">
      <label>Select Victim/Witness to View Details:</label>
      <select class="form-select mb-2" id="selectVictim" onchange="loadDetails(this.value)"></select>
      <div id="details"></div>
    </div>

    <!-- Dropdown for Risk -->
    <div class="card p-4 my-4">
      <label>View Risk History:</label>
      <select class="form-select mb-2" id="riskSelect" onchange="showRisk(this.value)"></select>
      <div id="riskDetails"></div>
    </div>

    <!-- Set Risk Level -->
    <div class="card p-4 my-4">
      <label>Set Risk Level:</label>
      <select class="form-select mb-2" id="riskVictimSelect"></select>
      <select class="form-select mb-2" id="riskLevelSelect">
        <option value="low">Low</option>
        <option value="medium">Medium</option>
        <option value="high">High</option>
      </select>
      <button class="btn btn-danger" onclick="submitRisk()">Submit Risk Level</button>
    </div>

  </div>

  <footer>
    <div class="container">
      <div class="d-flex flex-column flex-md-row justify-content-between align-items-center border-top pt-4 mt-4">
        <small class="text-muted">Â© 2025 Human Rights Monitor. All rights reserved.</small>
        <div class="d-flex gap-3 mt-3 mt-md-0">
          <a href="#" class="text-muted small">Privacy Policy</a>
          <a href="#" class="text-muted small">Terms</a>
          <a href="#" class="text-muted small">Contact</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="assets/js/victims.js"></script>
  <script>
    const rolee = localStorage.getItem("role");

    if (rolee === "admin") {
      const dashboardLink = document.getElementById("dashboard-link");
      if (dashboardLink) {
        dashboardLink.classList.remove("d-none");
      }
    }
  </script>
</body>

</html>